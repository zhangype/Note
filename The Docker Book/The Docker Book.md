# 简介

​	容器与管理程序虚拟化（hypervisor virtualization， HV）有所不同，管理程序虚拟化通过中间层将一台或者多台独立的机器虚拟运行与物理硬件之上，而容器则是直接运行在操作系统内核之上的用户空间。因此，容器虚拟化也被称为“操作系统级虚拟化”，容器技术可以让多个独立的用户空间运行在同一台宿主机上。

​	和传统的虚拟化以及半虚拟化（paravirtualization）相比，容器运行不需要模拟层（emulation layer）和管理层（hypervisor），而是使用操作系统的系统调用接口。这降低了运行单个容器所需的开销，也使得宿主机中可以进行更多的容器。

## 1.1 Docker 简介

## 1.2 Docker 组件

### 1.2.1 Docker 客户端和服务器

​	Docker 是一个客户-服务器（C/S）架构的程序。Docker 客户端只需向 Docker 服务器或守护进程发出请求，服务器或守护进程将完成所有工作并返回结果。Docker 提供了一个命令行工具 docker 以及一整套 RESTFUL API。

![Docker架构](Docker架构.png)

### 1.2.2 Docker 镜像

​	镜像是构建 Docker 世界的基石。用户基于镜像来运行自己的容器。镜像也是 Docker 生命周期中的”构建“部分。镜像是基于联合（Union）文件系统的一种层式的结构，由一系列指令一步一步构建出来。

### 1.2.3 Registry

​	Docker 用 Registry 来保存用户构建的镜像。Registry 分为公共和私有。

### 1.2.4 容器

​	Docker 可以帮你构建和部署容器，只需要把自己的应用程序或服务打包放进容器即可。可以认为，镜像是 Docker 生命周期中的构建或者打包阶段，而容器则是启动或执行阶段。

​	总结起来，Docker 容器就是：

- 一个镜像格式；

- 一系列标准的操作；

- 一个执行环境。

​	每个容器都包含一个软件镜像，容器里的软件镜像可以进行一些操作。例如，镜像可以被创建、启动、关闭、重启以及销毁。

​	Docker 在执行上述操作时，并不关心容器中到底塞进了什么，它不管里面是 Web 服务器，还是数据库，或者是应用服务器。所有容器都是按照相同的方式将内容“装载”进去。

## 1.5 Docker 的技术组件

​	Docker 包括以下几个部分：

​	一个原生的 Linux 容器格式， Docker 中称为 libcontainer，或者很流行的容器平台 lxc。libcontainer 格式现在是 Docker 容器的默认格式。

​	Linux 内核的命名空间，用于隔离文件系统、进程和网络。

- 文件系统隔离：每个容器都有自己的 root 文件系统。
- 进程隔离：每个容器都运行在自己的进程环境中。
- 网络隔离：容器间的虚拟网络接口和 IP 地址都是分开的。
- 资源隔离和分组：使用 cgroups（即 control group， Linux 的内核特性之一）将 CPU和内存之类的资源独立分配给每个 Docker 容器。
- 写时复制：文件系统都是通过写时复制创建的，这就意味着文件系统是分层的、快速的，而且占用的磁盘空间更小。
- 日志：容器产生的 STDOUT 、 STDERR 和 STDIN 这些 IO 流都会被收集并记入日志，用来进行日志分析和故障排错。
- 交互式 shell：用户可以创建一个伪 tty 终端，将其连接到 STDIN ，为容器提供一个交互式的 shell。